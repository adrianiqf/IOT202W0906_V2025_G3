//Configuraciones del mapa
mapboxgl.accessToken = "pk.eyJ1Ijoiam1vemFyIiwiYSI6ImNsbXNkaXl6cjBkZWgya21yMmN2YWxlMHcifQ.MqRofl-Zw2eQfn5eTVbw7w";
var map = new mapboxgl.Map({
    container: 'pantalla_mapa',
    style: 'mapbox://styles/mapbox/streets-v12',
    center: [-77.08555632370167, -12.053057801094083],
    zoom: 18.5,
    maxBounds: [
        [-77.0888854,-12.0627008], // Esquina suroeste de la zona permitida
        [-77.0832369,-12.0490944]  // Esquina noreste de la zona permitida
      ]
});
map.addControl(new mapboxgl.NavigationControl());

var piso1 = {
    "type": "FeatureCollection",
    "name": "piso1GJ",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
        //puertas
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Puerta 1", "codigo": "1" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [
            -77.08578050794216,
            -12.053517834269897
          ],
          [
            -77.08577883091122,
            -12.053532430776244
          ],
          [
            -77.08573237716584,
            -12.053528166628595
          ],
          [
            -77.08573388649368,
            -12.05351357012195
          ],
          [
            -77.08578050794216,
            -12.053517834269897
          ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Puerta 2", "codigo": "2" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [
            -77.0852441409979,
            -12.053422862399643
          ],
          [
            -77.08523386071748,
            -12.053435769570328
          ],
          [
            -77.08522648178341,
            -12.053430685392144
          ],
          [
            -77.0852367116694,
            -12.053416908909284
          ],
          [
            -77.0852441409979,
            -12.053422862399643
          ] ] ] ] } },
    
    //salones
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Capilla", "codigo": "A2" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085313811084802, -12.053230704495387 ], [ -77.085363417261263, -12.053236661087235 ], [ -77.085368783668855, -12.053193918749828 ], [ -77.08531917749238, -12.053187962156436 ], [ -77.085313811084802, -12.053230704495387 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "109", "codigo": "SA109-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085608608277894, -12.053337205901105 ], [ -77.085689567317431, -12.053346927270281 ], [ -77.085698325484941, -12.053277170259536 ], [ -77.085617366445405, -12.053267448887837 ], [ -77.085608608277894, -12.053337205901105 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "108", "codigo": "SA108-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085527227460133, -12.053327433886302 ], [ -77.08560818649967, -12.053337155255479 ], [ -77.08561694466718, -12.053267398244733 ], [ -77.085535985627644, -12.053257676873034 ], [ -77.085527227460133, -12.053327433886302 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "106", "codigo": "SA106-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085365286697964, -12.053307988423098 ], [ -77.085446245737501, -12.053317709792275 ], [ -77.085455003905011, -12.053247952781529 ], [ -77.085374044865475, -12.05323823140983 ], [ -77.085365286697964, -12.053307988423098 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "107", "codigo": "SA107-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085446667515725, -12.053317760437901 ], [ -77.085527626555262, -12.053327481807077 ], [ -77.085536384722772, -12.053257724796332 ], [ -77.085455425683236, -12.053248003424633 ], [ -77.085446667515725, -12.053317760437901 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Lab 8", "codigo": "LA008" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085203385857767, -12.053288547752215 ], [ -77.085284344897303, -12.053298269121392 ], [ -77.085293103064814, -12.053228512110646 ], [ -77.085212144025277, -12.053218790738947 ], [ -77.085203385857767, -12.053288547752215 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "105", "codigo": "SA105-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085284461301129, -12.053298319767018 ], [ -77.085365420340665, -12.053308041136194 ], [ -77.085374178508175, -12.053238284125449 ], [ -77.085293219468639, -12.05322856275375 ], [ -77.085284461301129, -12.053298319767018 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Biblioteca", "codigo": "BTC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085053536314774, -12.053414629415535 ], [ -77.085185495982756, -12.053430474811652 ], [ -77.085215821137751, -12.053188941200045 ], [ -77.085083861469755, -12.053173095789663 ], [ -77.085053536314774, -12.053414629415535 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08567342803417, -12.053478491284871 ], [ -77.085718245842656, -12.053481226847159 ], [ -77.085716497716135, -12.053507533057857 ], [ -77.085671679907676, -12.053504797496078 ], [ -77.08567342803417, -12.053478491284871 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Recepción" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085717953376573, -12.05348623444327 ], [ -77.085735880499954, -12.053487328667854 ], [ -77.08573471508214, -12.053504866139352 ], [ -77.085716787958759, -12.05350377191491 ], [ -77.085717953376573, -12.05348623444327 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "U. Trámite", "codigo": "UTD" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085803636779431, -12.053496843151105 ], [ -77.08583469187684, -12.05350091660395 ], [ -77.085830899008329, -12.053531336498159 ], [ -77.085799692330085, -12.053527589277607 ], [ -77.085803636779431, -12.053496843151105 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085841526909007, -12.053292900450755 ], [ -77.085846880082883, -12.053248319481851 ], [ -77.085873038942893, -12.053251603794676 ], [ -77.085867685769529, -12.05329618476358 ], [ -77.085841526909007, -12.053292900450755 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "U. Economía", "codigo": "UDE" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085807432988275, -12.053466318035397 ], [ -77.085838488085685, -12.053470391488242 ], [ -77.085834695217173, -12.053500811382451 ], [ -77.085803488538929, -12.053497064161899 ], [ -77.085807432988275, -12.053466318035397 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "CERSEU", "codigo": "CERSEU" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085797724033668, -12.053420524121965 ], [ -77.085792183482226, -12.05346479129441 ], [ -77.085761546066877, -12.053460480169221 ], [ -77.085767345830348, -12.05341701280857 ], [ -77.085797724033668, -12.053420524121965 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "USGOM", "codigo": "USGOM" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085845176643915, -12.0532938860868 ], [ -77.085839702789229, -12.053337484210726 ], [ -77.085778158599467, -12.053330059526129 ], [ -77.085783220211198, -12.05328674685363 ], [ -77.085845176643915, -12.0532938860868 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "DA", "codigo": "DAD" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08582888737628, -12.053424417495581 ], [ -77.085823923594305, -12.053468542078408 ], [ -77.085792183482098, -12.053464792905729 ], [ -77.085797707056699, -12.053420657043333 ], [ -77.08582888737628, -12.053424417495581 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Baño", "codigo": "SSHH-P1" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08587297336814, -12.053251514906327 ], [ -77.085801643817859, -12.053242949821746 ], [ -77.085813686298209, -12.053147033906095 ], [ -77.085885015848461, -12.053155598993735 ], [ -77.08587297336814, -12.053251514906327 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "106", "codigo": "SA106-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085472946362472, -12.052810244693754 ], [ -77.085553548318231, -12.052822581461243 ], [ -77.085564559800119, -12.052753144487566 ], [ -77.085483957844474, -12.052740807717559 ], [ -77.085472946362472, -12.052810244693754 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "108", "codigo": "SA108-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085391924488832, -12.052797843655 ], [ -77.08547252644459, -12.052810180422494 ], [ -77.085483537926464, -12.052740743448815 ], [ -77.085402935970777, -12.052728406678806 ], [ -77.085391924488832, -12.052797843655 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Baños", "codigo": "SSHH-P1" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085553552049092, -12.05282258756616 ], [ -77.08565452655121, -12.052838159224834 ], [ -77.085665538033041, -12.052768722251161 ], [ -77.08556412508382, -12.052753656118627 ], [ -77.085553552049092, -12.05282258756616 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "104", "codigo": "SGDFG" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08577341220564, -12.05285791148872 ], [ -77.085840023411151, -12.05286810458405 ], [ -77.085851034893039, -12.052798667610373 ], [ -77.085783851779865, -12.05278840480211 ], [ -77.08577341220564, -12.05285791148872 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "102", "codigo": "SA102-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085840025408785, -12.052868104425507 ], [ -77.085920627364516, -12.052880441192995 ], [ -77.085931638846347, -12.052811004219322 ], [ -77.08585103689073, -12.052798667449311 ], [ -77.085840025408785, -12.052868104425507 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "103", "codigo": "SA103-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085774208462553, -12.052734495529839 ], [ -77.085854810418311, -12.052746832297327 ], [ -77.0858658219002, -12.05267739532365 ], [ -77.085785219944555, -12.052665058553643 ], [ -77.085774208462553, -12.052734495529839 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "101", "codigo": "SA101-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085855293532703, -12.052746906260349 ], [ -77.085935895488433, -12.052759243027838 ], [ -77.085946906970264, -12.052689806054165 ], [ -77.085866305014648, -12.052677469284154 ], [ -77.085855293532703, -12.052746906260349 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "107", "codigo": "SA107-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085516181181461, -12.052695012724833 ], [ -77.08559678313722, -12.052707349492321 ], [ -77.085607794619108, -12.052637912518644 ], [ -77.085527192663463, -12.052625575748637 ], [ -77.085516181181461, -12.052695012724833 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "109", "codigo": "SA109-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085435159307821, -12.052682611686079 ], [ -77.085515761263579, -12.052694948453572 ], [ -77.085526772745453, -12.052625511479894 ], [ -77.085446170789766, -12.052613174709885 ], [ -77.085435159307821, -12.052682611686079 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "105", "codigo": "SA105-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085597266251611, -12.052707423455344 ], [ -77.085677868207341, -12.052719760222832 ], [ -77.085688879689172, -12.052650323249159 ], [ -77.085608277733556, -12.052637986479148 ], [ -77.085597266251611, -12.052707423455344 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085781040084584, -12.052690837798009 ], [ -77.085736681619863, -12.052683877491685 ], [ -77.08574090885935, -12.052657854365158 ], [ -77.085785267324127, -12.052664814670965 ], [ -77.085781040084584, -12.052690837798009 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085442029575105, -12.052638778009303 ], [ -77.085397671110385, -12.052631817702979 ], [ -77.085401898349872, -12.052605794576452 ], [ -77.085446256814649, -12.05261275488226 ], [ -77.085442029575105, -12.052638778009303 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Auditorio", "codigo": "AUD" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085889183970153, -12.053127431367926 ], [ -77.085728692482078, -12.053108159916611 ], [ -77.085750587900876, -12.05293376721405 ], [ -77.08591107938895, -12.05295303867789 ], [ -77.085889183970153, -12.053127431367926 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Cancha", "codigo": "A1" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085226988978675, -12.052972638785345 ], [ -77.085358948646657, -12.052988484181462 ], [ -77.085389273801653, -12.052746950569855 ], [ -77.085257314133656, -12.052731105159474 ], [ -77.085226988978675, -12.052972638785345 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "GYM", "codigo": "GYM" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085115353512307, -12.053176823080392 ], [ -77.085184168064714, -12.0531850861684 ], [ -77.085191612438834, -12.053125793253132 ], [ -77.085122797886399, -12.05311753016298 ], [ -77.085115353512307, -12.053176823080392 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras", "codigo": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085179952146419, -12.053434700541395 ], [ -77.085224529731491, -12.053440081820879 ], [ -77.085223997980577, -12.053443913901859 ], [ -77.085206169902136, -12.05344177440444 ], [ -77.085203982172388, -12.053459162512322 ], [ -77.08522179585789, -12.053461339544635 ], [ -77.085221228927111, -12.053466238605049 ], [ -77.085176651342039, -12.053460857326074 ], [ -77.085179952146419, -12.053434700541395 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Kiosco", "codigo": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085206163064001, -12.053441767172679 ], [ -77.085223994098044, -12.053443919684144 ], [ -77.085221793561786, -12.053461357537953 ], [ -77.085203962527729, -12.053459205026634 ], [ -77.085206163064001, -12.053441767172679 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "110", "codigo": "LA011" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085246321243062, -12.053411338719643 ], [ -77.085253815682279, -12.053350301410378 ], [ -77.085360810007657, -12.053363438661636 ], [ -77.08535331556844, -12.053424475970905 ], [ -77.085246321243062, -12.053411338719643 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "103", "codigo": "SA103-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085353315568454, -12.053424475970901 ], [ -77.085360810007671, -12.053363438661636 ], [ -77.085467804333049, -12.053376575912894 ], [ -77.085460309893833, -12.053437613222167 ], [ -77.085353315568454, -12.053424475970901 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "102", "codigo": "SA102-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085460309893833, -12.053437613222167 ], [ -77.085467804333049, -12.053376575912894 ], [ -77.085574798658442, -12.053389713164156 ], [ -77.085567304219225, -12.053450750473425 ], [ -77.085460309893833, -12.053437613222167 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "101", "codigo": "SA101-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085567304219225, -12.053450750473425 ], [ -77.085574798658442, -12.053389713164156 ], [ -77.085681792983806, -12.053402850415418 ], [ -77.085674298544603, -12.053463887724691 ], [ -77.085567304219225, -12.053450750473425 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "?", "codigo": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08518057824709, -12.053429880300751 ], [ -77.085185504296675, -12.053430474959374 ], [ -77.085184896370578, -12.053435292387919 ], [ -77.085179970320993, -12.053434697729335 ], [ -77.08518057824709, -12.053429880300751 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Control Eléctrico", "codigo": "CCE" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085680547246554, -12.052702448408168 ], [ -77.08569836942381, -12.052705027518815 ], [ -77.085695635104614, -12.052722459690285 ], [ -77.085677869743421, -12.052719819421014 ], [ -77.085680547246554, -12.052702448408168 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Ascensor", "codigo": "ASC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085701854283442, -12.05268670125024 ], [ -77.085719004970557, -12.05268928053742 ], [ -77.085707098191619, -12.052706204468937 ], [ -77.085698464503622, -12.052704993950455 ], [ -77.085701854283442, -12.05268670125024 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "DACC", "codigo": "DACC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085839798681434, -12.053337301902008 ], [ -77.085834324826749, -12.053380900025934 ], [ -77.085772780636987, -12.053373475341337 ], [ -77.085777842248717, -12.053330162668837 ], [ -77.085839798681434, -12.053337301902008 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "OCA", "codigo": "OCA" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085834367993826, -12.053380820835612 ], [ -77.085828894139141, -12.053424418959537 ], [ -77.085767349949379, -12.05341699427494 ], [ -77.085772411561109, -12.053373681602441 ], [ -77.085834367993826, -12.053380820835612 ] ] ] ] } }
    ]
    }
    

    var piso2 = {
        "type": "FeatureCollection",
        "name": "piso2GJ",
        "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
        "features": [
        { "type": "Feature", "properties": { "id": null, "nombre_area": "213", "codigo": "SA213-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085608608277894, -12.053337205901105 ], [ -77.085689567317431, -12.053346927270281 ], [ -77.085698325484941, -12.053277170259536 ], [ -77.085617366445405, -12.053267448887837 ], [ -77.085608608277894, -12.053337205901105 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "212", "codigo": "SA212-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08550491905919, -12.053324729350486 ], [ -77.085585878098726, -12.053334450719662 ], [ -77.085594636266237, -12.053264693708917 ], [ -77.0855136772267, -12.053254972337218 ], [ -77.08550491905919, -12.053324729350486 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "210", "codigo": "SA210-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085342978297021, -12.053305283887282 ], [ -77.085423937336557, -12.053315005256458 ], [ -77.085432695504068, -12.053245248245712 ], [ -77.085351736464531, -12.053235526874014 ], [ -77.085342978297021, -12.053305283887282 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "211", "codigo": "SA211-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085424359114782, -12.053315055902084 ], [ -77.085505318154318, -12.053324777271261 ], [ -77.085514076321829, -12.053255020260515 ], [ -77.085433117282292, -12.053245298888816 ], [ -77.085424359114782, -12.053315055902084 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "209", "codigo": "SA209-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085203385857767, -12.053288547752215 ], [ -77.085284344897303, -12.053298269121392 ], [ -77.085293103064814, -12.053228512110646 ], [ -77.085212144025277, -12.053218790738947 ], [ -77.085203385857767, -12.053288547752215 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Tercio", "codigo": "TE" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085342818089103, -12.053305589946616 ], [ -77.085353142638311, -12.053224634179632 ], [ -77.085294047627073, -12.053217403212303 ], [ -77.085284326255362, -12.053298362251839 ], [ -77.085342818089103, -12.053305589946616 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Magna", "codigo": "AM" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085078593783095, -12.053272288593684 ], [ -77.085203387162338, -12.053288538344427 ], [ -77.085215821137751, -12.053188941200045 ], [ -77.085093066588684, -12.053174204085643 ], [ -77.085078593783095, -12.053272288593684 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08567342803417, -12.053478491284871 ], [ -77.085718245842656, -12.053481226847159 ], [ -77.085716497716135, -12.053507533057857 ], [ -77.085671679907676, -12.053504797496078 ], [ -77.08567342803417, -12.053478491284871 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Salón Catedráticos", "codigo": "SC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085698421605301, -12.053275794981767 ], [ -77.085710721087253, -12.053165758052943 ], [ -77.08576430084112, -12.053171485829413 ], [ -77.085752098974126, -12.053280649447125 ], [ -77.085698421605301, -12.053275794981767 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Decanato", "codigo": "DEC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085736723839148, -12.05345744955722 ], [ -77.085838494395503, -12.053470431318699 ], [ -77.085830899008329, -12.053531336498159 ], [ -77.085729717895049, -12.05351911291865 ], [ -77.085736723839148, -12.05345744955722 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085841526909007, -12.053292900450755 ], [ -77.085846880082883, -12.053248319481851 ], [ -77.085873038942893, -12.053251603794676 ], [ -77.085867685769529, -12.05329618476358 ], [ -77.085841526909007, -12.053292900450755 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "UP", "codigo": "UP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085828865677414, -12.053424489516848 ], [ -77.08582411120328, -12.053468602574748 ], [ -77.085761546066877, -12.053460480169221 ], [ -77.085767345830348, -12.05341701280857 ], [ -77.085828865677414, -12.053424489516848 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "OCAA", "codigo": "OCAA" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085845176643915, -12.0532938860868 ], [ -77.085839702789229, -12.053337484210726 ], [ -77.085778158599467, -12.053330059526129 ], [ -77.085783220211198, -12.05328674685363 ], [ -77.085845176643915, -12.0532938860868 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Baños", "codigo": "SSHH-P2" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08587297336814, -12.053251514906327 ], [ -77.085801643817859, -12.053242949821746 ], [ -77.085813686298209, -12.053147033906095 ], [ -77.085885015848461, -12.053155598993735 ], [ -77.08587297336814, -12.053251514906327 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Data Center", "codigo": "DTC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085472946362472, -12.052810244693754 ], [ -77.085553548318231, -12.052822581461243 ], [ -77.085564559800119, -12.052753144487566 ], [ -77.085483957844474, -12.052740807717559 ], [ -77.085472946362472, -12.052810244693754 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "208(Lab2)", "codigo": "LA002" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085391924488832, -12.052797843655 ], [ -77.08547252644459, -12.052810180422494 ], [ -77.085483537926464, -12.052740743448815 ], [ -77.085402935970777, -12.052728406678806 ], [ -77.085391924488832, -12.052797843655 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Baños", "codigo": "SSHH-P2" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085553552049092, -12.05282258756616 ], [ -77.08565452655121, -12.052838159224834 ], [ -77.085665538033041, -12.052768722251161 ], [ -77.08556412508382, -12.052753656118627 ], [ -77.085553552049092, -12.05282258756616 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "204", "codigo": "SA204-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08577341220564, -12.05285791148872 ], [ -77.085840023411151, -12.05286810458405 ], [ -77.085851034893039, -12.052798667610373 ], [ -77.085783851779865, -12.05278840480211 ], [ -77.08577341220564, -12.05285791148872 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "202", "codigo": "SA202-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085840025408785, -12.052868104425507 ], [ -77.085920627364516, -12.052880441192995 ], [ -77.085931638846347, -12.052811004219322 ], [ -77.08585103689073, -12.052798667449311 ], [ -77.085840025408785, -12.052868104425507 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "203", "codigo": "SA203-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085774208462553, -12.052734495529839 ], [ -77.085854810418311, -12.052746832297327 ], [ -77.0858658219002, -12.05267739532365 ], [ -77.085785219944555, -12.052665058553643 ], [ -77.085774208462553, -12.052734495529839 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "201", "codigo": "SA201-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085855293532703, -12.052746906260349 ], [ -77.085935895488433, -12.052759243027838 ], [ -77.085946906970264, -12.052689806054165 ], [ -77.085866305014648, -12.052677469284154 ], [ -77.085855293532703, -12.052746906260349 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "207(Lab1)", "codigo": "LA001" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085516181181461, -12.052695012724833 ], [ -77.08559678313722, -12.052707349492321 ], [ -77.085607794619108, -12.052637912518644 ], [ -77.085527192663463, -12.052625575748637 ], [ -77.085516181181461, -12.052695012724833 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "209(Lab3)", "codigo": "LA003" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085435159307821, -12.052682611686079 ], [ -77.085515761263579, -12.052694948453572 ], [ -77.085526772745453, -12.052625511479894 ], [ -77.085446170789766, -12.052613174709885 ], [ -77.085435159307821, -12.052682611686079 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "205", "codigo": "SA205-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085597266251611, -12.052707423455344 ], [ -77.085677868207341, -12.052719760222832 ], [ -77.085688879689172, -12.052650323249159 ], [ -77.085608277733556, -12.052637986479148 ], [ -77.085597266251611, -12.052707423455344 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085781040084584, -12.052690837798009 ], [ -77.085736681619863, -12.052683877491685 ], [ -77.08574090885935, -12.052657854365158 ], [ -77.085785267324127, -12.052664814670965 ], [ -77.085781040084584, -12.052690837798009 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085442029575105, -12.052638778009303 ], [ -77.085397671110385, -12.052631817702979 ], [ -77.085401898349872, -12.052605794576452 ], [ -77.085446256814649, -12.05261275488226 ], [ -77.085442029575105, -12.052638778009303 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Comedor", "codigo": "COM" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085889183970153, -12.053127431367926 ], [ -77.085728692482078, -12.053108159916611 ], [ -77.085750587900876, -12.05293376721405 ], [ -77.08591107938895, -12.05295303867789 ], [ -77.085889183970153, -12.053127431367926 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras", "codigo": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085179952146405, -12.053434700541493 ], [ -77.08522452812123, -12.053440078289714 ], [ -77.085224000379412, -12.05344429863605 ], [ -77.085223772490906, -12.05344610500995 ], [ -77.085222625851813, -12.053455186143989 ], [ -77.085221815048484, -12.053461569446767 ], [ -77.085221229734842, -12.05346624021324 ], [ -77.085176651342024, -12.053460857326172 ], [ -77.085179952146405, -12.053434700541493 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "206", "codigo": "SA206-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085245570284513, -12.05340984975976 ], [ -77.08531689983478, -12.053418414839008 ], [ -77.08532456323131, -12.053357377482019 ], [ -77.085253233681073, -12.053348812400834 ], [ -77.085245570284513, -12.05340984975976 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "205", "codigo": "SA205-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08531689983478, -12.053418414839401 ], [ -77.085388229385046, -12.053426979918649 ], [ -77.085395892781577, -12.05336594256166 ], [ -77.085324563231339, -12.053357377480475 ], [ -77.08531689983478, -12.053418414839401 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "204", "codigo": "SA204-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085388229385032, -12.05342697991877 ], [ -77.085459558935298, -12.053435544998019 ], [ -77.085467222331829, -12.053374507641029 ], [ -77.085395892781591, -12.053365942559845 ], [ -77.085388229385032, -12.05342697991877 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "203", "codigo": "SA203-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085459558935284, -12.053435544997866 ], [ -77.08553088848555, -12.053444110077114 ], [ -77.085538551882081, -12.053383072720125 ], [ -77.085467222331843, -12.05337450763894 ], [ -77.085459558935284, -12.053435544997866 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": null, "codigo": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08518057824709, -12.053429880300751 ], [ -77.085185504296675, -12.053430474959374 ], [ -77.085184896370578, -12.053435292387919 ], [ -77.085179970320993, -12.053434697729335 ], [ -77.08518057824709, -12.053429880300751 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Control Electrico", "codigo": "CCE" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085680547246554, -12.052702448408168 ], [ -77.08569836942381, -12.052705027518815 ], [ -77.085695635104614, -12.052722459690285 ], [ -77.085677869743421, -12.052719819421014 ], [ -77.085680547246554, -12.052702448408168 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Ascensor", "codigo": "ASC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085701854283442, -12.05268670125024 ], [ -77.085719004970557, -12.05268928053742 ], [ -77.085707098191619, -12.052706204468937 ], [ -77.085698464503622, -12.052704993950455 ], [ -77.085701854283442, -12.05268670125024 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "UPPN", "codigo": "UPPN" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085839798681434, -12.053337301902008 ], [ -77.085834324826749, -12.053380900025934 ], [ -77.085772780636987, -12.053373475341337 ], [ -77.085777842248717, -12.053330162668837 ], [ -77.085839798681434, -12.053337301902008 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Baños Adm.", "codigo": "SSHH-AD-2" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085834367993826, -12.053380820835612 ], [ -77.085828894139141, -12.053424418959537 ], [ -77.085767349949379, -12.05341699427494 ], [ -77.085772411561109, -12.053373681602441 ], [ -77.085834367993826, -12.053380820835612 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "207", "codigo": "SA207-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085102745853547, -12.053419775893067 ], [ -77.085181263128334, -12.053430616573099 ], [ -77.085192716925093, -12.053341524695421 ], [ -77.085113765199694, -12.053331418256901 ], [ -77.085102745853547, -12.053419775893067 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Investigación", "codigo": "GI" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085056841903906, -12.053415348979231 ], [ -77.08510272622857, -12.053419811460506 ], [ -77.085113623503531, -12.053331427766176 ], [ -77.085067535186994, -12.053325558431055 ], [ -77.085056841903906, -12.053415348979231 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Digitalización", "codigo": "ODG" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085585877105274, -12.053334438320928 ], [ -77.085608584134661, -12.053337236018205 ], [ -77.085617342302172, -12.053267479007459 ], [ -77.085594663342746, -12.053264751461423 ], [ -77.085585877105274, -12.053334438320928 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "202", "codigo": "SA202-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08553088848555, -12.05344411007669 ], [ -77.085602218035817, -12.053452675155938 ], [ -77.085609881432347, -12.053391637798949 ], [ -77.085538551882109, -12.053383072717764 ], [ -77.08553088848555, -12.05344411007669 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "201", "codigo": "SA201-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085602218035788, -12.05345267515524 ], [ -77.085673547586055, -12.053461240234489 ], [ -77.085681210982585, -12.0534002028775 ], [ -77.085609881432347, -12.053391637796315 ], [ -77.085602218035788, -12.05345267515524 ] ] ] ] } }
        ]
        }
        
        
        var piso3 = {
            "type": "FeatureCollection",
            "name": "piso3GJ",
            "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
            "features": [
            { "type": "Feature", "properties": { "id": null, "nombre_area": "310", "codigo": "SA310-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085608608277894, -12.053337205901105 ], [ -77.085689567317431, -12.053346927270281 ], [ -77.085698325484941, -12.053277170259536 ], [ -77.085617366445405, -12.053267448887837 ], [ -77.085608608277894, -12.053337205901105 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "301-Lab7", "codigo": "LA301-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08550491905919, -12.053324729350486 ], [ -77.085585878098726, -12.053334450719662 ], [ -77.085594636266237, -12.053264693708917 ], [ -77.0855136772267, -12.053254972337218 ], [ -77.08550491905919, -12.053324729350486 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "309-Soporte Técnico", "codigo": "SA309-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085342978297021, -12.053305283887282 ], [ -77.085423937336557, -12.053315005256458 ], [ -77.085432695504068, -12.053245248245712 ], [ -77.085351736464531, -12.053235526874014 ], [ -77.085342978297021, -12.053305283887282 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "302-Lab6", "codigo": "SA302-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085424359114782, -12.053315055902084 ], [ -77.085505318154318, -12.053324777271261 ], [ -77.085514076321829, -12.053255020260515 ], [ -77.085433117282292, -12.053245298888816 ], [ -77.085424359114782, -12.053315055902084 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "308-Lab5", "codigo": "LA308-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085203385857767, -12.053288547752215 ], [ -77.085284344897303, -12.053298269121392 ], [ -77.085293103064814, -12.053228512110646 ], [ -77.085212144025277, -12.053218790738947 ], [ -77.085203385857767, -12.053288547752215 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "311", "codigo": "SA311-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085342818089103, -12.053305589946616 ], [ -77.085353142638311, -12.053224634179632 ], [ -77.085294047627073, -12.053217403212303 ], [ -77.085284326255362, -12.053298362251839 ], [ -77.085342818089103, -12.053305589946616 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "307-lab4-CENPRO", "codigo": "LA307-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085568996006486, -12.053448163991487 ], [ -77.085675990331879, -12.053461011608496 ], [ -77.085683653728452, -12.053399974260875 ], [ -77.08557665940306, -12.053387126640937 ], [ -77.085568996006486, -12.053448163991487 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "><" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08567342803417, -12.053478491284871 ], [ -77.085718245842656, -12.053481226847159 ], [ -77.085716497716135, -12.053507533057857 ], [ -77.085671679907676, -12.053504797496078 ], [ -77.08567342803417, -12.053478491284871 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Salón Catedráticos", "codigo": "SA-CA" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085698421605301, -12.053275794981767 ], [ -77.085710721087253, -12.053165758052943 ], [ -77.08576430084112, -12.053171485829413 ], [ -77.085752098974126, -12.053280649447125 ], [ -77.085698421605301, -12.053275794981767 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "<>" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085841526909007, -12.053292900450755 ], [ -77.085846880082883, -12.053248319481851 ], [ -77.085873038942893, -12.053251603794676 ], [ -77.085867685769529, -12.05329618476358 ], [ -77.085841526909007, -12.053292900450755 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Escuela Sistemas", "codigo": "OF309" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085828907314195, -12.053424431706187 ], [ -77.085822839825283, -12.053468480585879 ], [ -77.085761546066877, -12.053460480169221 ], [ -77.085767345830348, -12.05341701280857 ], [ -77.085828907314195, -12.053424431706187 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Unidad de Matricula", "codigo": "UN-MA" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085845176643915, -12.0532938860868 ], [ -77.085839702789229, -12.053337484210726 ], [ -77.085778158599467, -12.053330059526129 ], [ -77.085783220211198, -12.05328674685363 ], [ -77.085845176643915, -12.0532938860868 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Baños", "codigo": "SSHH-P3" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08587297336814, -12.053251514906327 ], [ -77.085801643817859, -12.053242949821746 ], [ -77.085813686298209, -12.053147033906095 ], [ -77.085885015848461, -12.053155598993735 ], [ -77.08587297336814, -12.053251514906327 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "304-Lab5", "codigo": "LA304-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085472946362472, -12.052810244693754 ], [ -77.085553548318231, -12.052822581461243 ], [ -77.085564559800119, -12.052753144487566 ], [ -77.085483957844474, -12.052740807717559 ], [ -77.085472946362472, -12.052810244693754 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "306-Lab7", "codigo": "LA306-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085391924488832, -12.052797843655 ], [ -77.08547252644459, -12.052810180422494 ], [ -77.085483537926464, -12.052740743448815 ], [ -77.085402935970777, -12.052728406678806 ], [ -77.085391924488832, -12.052797843655 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Baños", "codigo": "SSHH-P3" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085553552049092, -12.05282258756616 ], [ -77.08565452655121, -12.052838159224834 ], [ -77.085665538033041, -12.052768722251161 ], [ -77.08556412508382, -12.052753656118627 ], [ -77.085553552049092, -12.05282258756616 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "302", "codigo": "SA302-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08577341220564, -12.05285791148872 ], [ -77.085920595302937, -12.052880369056997 ], [ -77.085937937319201, -12.052758935204928 ], [ -77.085791895648981, -12.052736329750902 ], [ -77.08577341220564, -12.05285791148872 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "301-Música", "codigo": "SA301-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085774208462553, -12.052734495529839 ], [ -77.085937660768764, -12.052758484448137 ], [ -77.085947616584079, -12.052690690618064 ], [ -77.085785219944555, -12.052665058553643 ], [ -77.085774208462553, -12.052734495529839 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "305-Lab6", "codigo": "LA305-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085516181181461, -12.052695012724833 ], [ -77.08559678313722, -12.052707349492321 ], [ -77.085607794619108, -12.052637912518644 ], [ -77.085527192663463, -12.052625575748637 ], [ -77.085516181181461, -12.052695012724833 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "307-Lab8", "codigo": "LA307-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085435159307821, -12.052682611686079 ], [ -77.085515761263579, -12.052694948453572 ], [ -77.085526772745453, -12.052625511479894 ], [ -77.085446170789766, -12.052613174709885 ], [ -77.085435159307821, -12.052682611686079 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "303-Lab4", "codigo": "LA303-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085597266251611, -12.052707423455344 ], [ -77.085677868207341, -12.052719760222832 ], [ -77.085688879689172, -12.052650323249159 ], [ -77.085608277733556, -12.052637986479148 ], [ -77.085597266251611, -12.052707423455344 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "<>" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085781040084584, -12.052690837798009 ], [ -77.085736681619863, -12.052683877491685 ], [ -77.08574090885935, -12.052657854365158 ], [ -77.085785267324127, -12.052664814670965 ], [ -77.085781040084584, -12.052690837798009 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "<>" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085442029575105, -12.052638778009303 ], [ -77.085397671110385, -12.052631817702979 ], [ -77.085401898349872, -12.052605794576452 ], [ -77.085446256814649, -12.05261275488226 ], [ -77.085442029575105, -12.052638778009303 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Unidad de Posgrado", "codigo": "UN-PO" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085889183970153, -12.053127431367926 ], [ -77.085728692482078, -12.053108159916611 ], [ -77.085750587900876, -12.05293376721405 ], [ -77.08591107938895, -12.05295303867789 ], [ -77.085889183970153, -12.053127431367926 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "><", "codigo": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085179952146419, -12.053434700541395 ], [ -77.085224529731491, -12.053440081820879 ], [ -77.085221228927111, -12.053466238605049 ], [ -77.085176651342039, -12.053460857326074 ], [ -77.085179952146419, -12.053434700541395 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "306-Lab3", "codigo": "LA306-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085462001681108, -12.053435316372827 ], [ -77.085568996006501, -12.053448163989836 ], [ -77.085576659403074, -12.053387126642216 ], [ -77.085469665077682, -12.053374279022277 ], [ -77.085462001681108, -12.053435316372827 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "305-Lab2", "codigo": "LA305-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085355007355702, -12.053422468753554 ], [ -77.085462001681094, -12.053435316370564 ], [ -77.085469665077667, -12.053374279022943 ], [ -77.085362670752275, -12.053361431403005 ], [ -77.085355007355702, -12.053422468753554 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "304-Lab1", "codigo": "LA304-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085248013030323, -12.053409621133666 ], [ -77.085355007355716, -12.053422468750675 ], [ -77.085362670752289, -12.053361431403054 ], [ -77.085255676426897, -12.053348583783116 ], [ -77.085248013030323, -12.053409621133666 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": null, "codigo": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08518057824709, -12.053429880300751 ], [ -77.085185504296675, -12.053430474959374 ], [ -77.085184896370578, -12.053435292387919 ], [ -77.085179970320993, -12.053434697729335 ], [ -77.08518057824709, -12.053429880300751 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Control Electrico", "codigo": "CCE" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085680547246554, -12.052702448408168 ], [ -77.08569836942381, -12.052705027518815 ], [ -77.085695635104614, -12.052722459690285 ], [ -77.085677869743421, -12.052719819421014 ], [ -77.085680547246554, -12.052702448408168 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Ascensor", "codigo": "ASC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085701854283442, -12.05268670125024 ], [ -77.085719004970557, -12.05268928053742 ], [ -77.085707098191619, -12.052706204468937 ], [ -77.085698464503622, -12.052704993950455 ], [ -77.085701854283442, -12.05268670125024 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Escuela Software", "codigo": "OF311" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085839798681434, -12.053337301902008 ], [ -77.085834324826749, -12.053380900025934 ], [ -77.085772780636987, -12.053373475341337 ], [ -77.085777842248717, -12.053330162668837 ], [ -77.085839798681434, -12.053337301902008 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Baños Docentes", "codigo": "SSHH-D-AP3" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085834367993826, -12.053380820835612 ], [ -77.085828894139141, -12.053424418959537 ], [ -77.085767349949379, -12.05341699427494 ], [ -77.085772411561109, -12.053373681602441 ], [ -77.085834367993826, -12.053380820835612 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "303-Robotica/IOT", "codigo": "LA303-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085585877105274, -12.053334438320928 ], [ -77.085608584134661, -12.053337236018205 ], [ -77.085617342302172, -12.053267479007459 ], [ -77.085594663342746, -12.053264751461423 ], [ -77.085585877105274, -12.053334438320928 ] ] ] ] } }
            ]
            }
                      
var borde ={
    "type": "FeatureCollection",
    "name": "bordeFISI",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085389841528567, -12.052603463149408 ], [ -77.085708455068485, -12.052652979347117 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085694391026635, -12.053276250332443 ], [ -77.085698268463048, -12.053276595055527 ], [ -77.085707567202363, -12.053191651307301 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085685281676049, -12.053121126126781 ], [ -77.085631115409385, -12.053112736163946 ], [ -77.085705847088761, -12.052960440715076 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085894519619757, -12.052876715985468 ], [ -77.085885190598049, -12.052950041973977 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085773702225993, -12.052857670006272 ], [ -77.085751163336724, -12.052934470008132 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085682974103591, -12.052821189801277 ], [ -77.085659959106167, -12.052804017496291 ], [ -77.08566554405526, -12.052768725218991 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085720096128327, -12.052848929228816 ], [ -77.08572006419611, -12.052848864033384 ], [ -77.0857045629255, -12.052837297986182 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085708218724463, -12.052653168992748 ], [ -77.085701773697338, -12.052686781320894 ], [ -77.085719185483882, -12.05268920235801 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085862244048812, -12.05312420252065 ], [ -77.085858722586607, -12.053152683698736 ], [ -77.085726382529145, -12.053138142999916 ], [ -77.085729756936985, -12.053108442846694 ], [ -77.085862244048812, -12.053124208965995 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085733347790907, -12.053519582500098 ], [ -77.085715959266579, -12.053517497130631 ], [ -77.085716497978609, -12.053507529351114 ], [ -77.085671721242022, -12.0535044407554 ], [ -77.085674893689998, -12.053462815475672 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085654530816669, -12.052838166712235 ], [ -77.085391839935696, -12.052797966308063 ], [ -77.085401488314815, -12.052738391722569 ], [ -77.085401114739099, -12.052738313890073 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085740909601611, -12.052657856860934 ], [ -77.085695669449805, -12.052722415280858 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085750088486591, -12.052854041275825 ], [ -77.085720041584395, -12.052849338174953 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085740909601611, -12.052657855599977 ], [ -77.085947746248976, -12.052690167940566 ], [ -77.085920638203703, -12.052880459177326 ], [ -77.085773449164648, -12.052857697813348 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.08537682208042, -12.052733252644975 ], [ -77.085352031015631, -12.05272808755964 ], [ -77.085389833266973, -12.052603471228874 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085709958123076, -12.053169810307102 ], [ -77.08571035409193, -12.05316619314161 ], [ -77.085679984421361, -12.053163718129227 ], [ -77.085720094231078, -12.052848926133871 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085694655397234, -12.053276207242064 ], [ -77.085212129478336, -12.053218895905808 ] ] ] } }
    ]
    }
    
    var borde1 ={
        "type": "FeatureCollection",
        "name": "borde1",
        "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
        "features": [
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085800200101062, -12.053527124611982 ], [ -77.085779722505364, -12.053524802742421 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085188839997656, -12.053403775263792 ], [ -77.085217627342359, -12.053406967835871 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085217664439455, -12.053406387368225 ], [ -77.08521751605106, -12.053407765978886 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085246488881182, -12.053411103667829 ], [ -77.085240108181068, -12.053419810682259 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085224527401721, -12.053439836814391 ], [ -77.085229572606465, -12.053433161437178 ] ] ] } }
        ]
        }
    
    var borde2={
        "type": "FeatureCollection",
        "name": "borde2",
        "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
        "features": [
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085800200101062, -12.053527124611982 ], [ -77.085779722505364, -12.053524802742421 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085078513241157, -12.053271646281448 ], [ -77.085067532501427, -12.053325920028358 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085245598550955, -12.053409652498729 ], [ -77.085224527401763, -12.053440417281969 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085682750702532, -12.052821057664586 ], [ -77.085704415405218, -12.052837310793713 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085376328708989, -12.052733116609573 ], [ -77.085401257955908, -12.052738340831469 ] ] ] } }
        ]
        }
    var borde3={
        "type": "FeatureCollection",
        "name": "borde3",
        "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
        "features": [
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085761841706201, -12.053459717828144 ], [ -77.085727415603301, -12.05345565455538 ], [ -77.085717325193798, -12.053480614658529 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085248121153299, -12.05340950738182 ], [ -77.085224379013368, -12.05344027216508 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085203604640938, -12.053287609149328 ], [ -77.085180456054488, -12.053430404216117 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085682899090898, -12.052821130223206 ], [ -77.085704637987803, -12.052837383352324 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085376625485679, -12.052733189168217 ], [ -77.085401109567485, -12.052738340831473 ] ] ] } }
        ]
        }
    var puerta1 = {
        "type": "FeatureCollection",
        "name": "puerta1",
        "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
        "features": [
            {
                "type": "Feature",
                "properties": { "id": "1", "name": "Linea Roja" },
                "geometry": {
                    "type": "LineString",
                    "coordinates": [
                            [-77.08578050794216,-12.053517834269897],
                            [-77.08577883091122,-12.053532430776244],
                            [-77.08573237716584,-12.053528166628595],
                            [-77.08573388649368,-12.05351357012195],
                            [-77.08578050794216,-12.053517834269897]
                    ]
                }
            }
        ]
    };

    var puerta2 = {
        "type": "FeatureCollection",
        "name": "puerta2",
        "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
        "features": [
            {
                "type": "Feature",
                "properties": { "id": "2", "name": "Linea Roja" },
                "geometry": {
                    "type": "LineString",
                    "coordinates": [
                            [-77.0852441409979,-12.053422862399643], 
                            [-77.08523386071748,-12.053435769570328],
                            [-77.08522648178341,-12.053430685392144],
                            [-77.0852367116694,-12.053416908909284],
                            [-77.0852441409979,-12.053422862399643]
                    ]
                }
            }
        ]
    };
    

map.on('load', () => {
    // Add a data source containing GeoJSON data.
    map.addSource('m1', {
        'type': 'geojson',
        'data': piso1
        
    });

    map.addSource('m2', {
        'type': 'geojson',
        'data': piso2
        
    });

    map.addSource('m3', {
        'type': 'geojson',
        'data': piso3
        
    });
    //borde
    map.addSource('bor', {
        'type': 'geojson',
        'data': borde
        
    });

    map.addSource('bor1', {
        'type': 'geojson',
        'data': borde1
        
    });
    map.addSource('bor2', {
        'type': 'geojson',
        'data': borde2
        
    });
    map.addSource('bor3', {
        'type': 'geojson',
        'data': borde3
        
    });
            //Cargamos el borde
            map.addLayer({
                'id': 'bd',
                'type': 'line',
                'source': 'bor',
                'layout': {},
                'paint': {
                    'line-color': '#000',
                    'line-width': 2
                }
            });

            //Cargamos el borde 1
            map.addLayer({
                'id': 'bd1',
                'type': 'line',
                'source': 'bor1',
                'layout': {},
                'paint': {
                    'line-color': '#000',
                    'line-width': 2
                }
            });
            
    
            //Cargamos la capa1
            // Add a new layer to visualize the polygon.
            map.addLayer({
                'id': 'maine1',
                'type': 'fill',
                'source': 'm1', // reference the data source
                'layout': {},
                'paint': {
                    'fill-color': [
                        'match',
                        ['get','tipo'],
                        'otro','red',
                        'salon','blue',
                        'white'
    
                    ], // colores por tipos
                    'fill-opacity': 1
                }
            });
        // Add a black outline around the polygon.
        map.addLayer({
            'id': 'outline1',
            'type': 'line',
            'source': 'm1',
            'layout': {},
            'paint': {
                'line-color': '#000',
                'line-width': 2
            }
        });

        map.addLayer({
            'id': 'poi-labels1',
            'type': 'symbol',
            'source': 'm1',
            'layout': {
            'text-field': ['get', 'nombre_area'],
            'text-radial-offset': 0.0,
            'text-size': 20,
            'text-justify': 'auto',
            'icon-image': ['get', 'icon']
            }
            });



            //Cargamos la capa2
            // Add a new layer to visualize the polygon.
            map.addLayer({
                'id': 'maine2',
                'type': 'fill',
                'source': 'm2', // reference the data source
                'layout': {},
                'paint': {
                    'fill-color': [
                        'match',
                        ['get','tipo'],
                        'otro','red',
                        'salon','blue',
                        'white'
    
                    ], // colores por tipos
                    'fill-opacity': 1
                }
            });
        // Add a black outline around the polygon.
        map.addLayer({
            'id': 'outline2',
            'type': 'line',
            'source': 'm2',
            'layout': {},
            'paint': {
                'line-color': '#000',
                'line-width': 2
            }
        });

        map.addLayer({
            'id': 'poi-labels2',
            'type': 'symbol',
            'source': 'm2',
            'layout': {
            'text-field': ['get', 'nombre_area'],
            'text-radial-offset': 0.0,
            'text-size': 20,
            'text-justify': 'auto',
            'icon-image': ['get', 'icon']
            }
            });
            //Cargamos el borde 2
            map.addLayer({
                'id': 'bd2',
                'type': 'line',
                'source': 'bor2',
                'layout': {},
                'paint': {
                    'line-color': '#000',
                    'line-width': 2
                }
            });
            

            map.setLayoutProperty('maine2', 'visibility', 'none');
            map.setLayoutProperty('outline2', 'visibility', 'none');
            map.setLayoutProperty('poi-labels2', 'visibility', 'none');
            map.setLayoutProperty('bd2', 'visibility', 'none');
            
    
    //Cargamos la capa3
            // Add a new layer to visualize the polygon.
            map.addLayer({
                'id': 'maine3',
                'type': 'fill',
                'source': 'm3', // reference the data source
                'layout': {},
                'paint': {
                    'fill-color': [
                        'match',
                        ['get','tipo'],
                        'otro','red',
                        'salon','blue',
                        'white'
    
                    ], // colores por tipos
                    'fill-opacity': 0.9
                }
            });
        // Add a black outline around the polygon.
        map.addLayer({
            'id': 'outline3',
            'type': 'line',
            'source': 'm3',
            'layout': {},
            'paint': {
                'line-color': '#000',
                'line-width': 2
            }
        });

        map.addLayer({
            'id': 'poi-labels3',
            'type': 'symbol',
            'source': 'm3',
            'layout': {
            'text-field': ['get', 'nombre_area'],
            'text-radial-offset': 0.0,
            'text-size': 20,
            'text-justify': 'auto',
            'icon-image': ['get', 'icon']
            }
            });
            
            //Cargamos el borde 3
            map.addLayer({
                'id': 'bd3',
                'type': 'line',
                'source': 'bor3',
                'layout': {},
                'paint': {
                    'line-color': '#000',
                    'line-width': 2
                }
            });

            map.setLayoutProperty('maine3', 'visibility', 'none');
            map.setLayoutProperty('outline3', 'visibility', 'none');
            map.setLayoutProperty('poi-labels3', 'visibility', 'none');
            map.setLayoutProperty('bd3', 'visibility', 'none');
        
        map.addSource('puerta1', {
            'type': 'geojson',
            'data': puerta1
        });

        map.addLayer({
            'id': 'lineaRoja',
            'type': 'line',
            'source': 'puerta1',
            'layout': {},
            'paint': {
                'line-color': '#FF0000', // Color rojo
                'line-width': 4          // Grosor de la línea
            }
        });

        map.addSource('puerta2', {
            'type': 'geojson',
            'data': puerta2
        });

        map.addLayer({
            'id': 'lineaRoja2',
            'type': 'line',
            'source': 'puerta2',
            'layout': {},
            'paint': {
                'line-color': '#FF0000', // Color rojo
                'line-width': 4          // Grosor de la línea
            }
        });
        
    });

    function mostrar(code)
    { 
      var parametros = 
      {
        "codigo" : code,
        "apellido" : "hurtado",
        "telefono" : "123456789"
      };

      $.ajax({
        data: parametros,
        url: '../controlador/controlador_ajax_area.php',
        type: 'POST',
        
        beforesend: function()
        {
          $('#mostrar_mensaje').html("Mensaje antes de Enviar");
        },

        success: function(mensaje)
        {
          $('#mostrar_datos').html(mensaje);
        }
      });
    }

    let markers1 = [];
let markers2 = [];
let markers3 = [];

function removeAllMarkers() {
    // Elimina todos los marcadores del mapa
    markers1.forEach(markerObj => markerObj.marker.remove());
    markers2.forEach(markerObj => markerObj.marker.remove());
    markers3.forEach(markerObj => markerObj.marker.remove());

    // Reinicia los arreglos de marcadores
    markers1 = [];
    markers2 = [];
    markers3 = [];
}

function showMarkersByLayer(layerId) {
    if (layerId === 1) {
        markers1.forEach(markerObj => {
            markerObj.marker.getElement().style.visibility = "visible";
        });
        markers2.forEach(markerObj => {
            markerObj.marker.getElement().style.visibility = "hidden";
        });
        markers3.forEach(markerObj => {
            markerObj.marker.getElement().style.visibility = "hidden";
        });
    } else if (layerId === 2) {
        markers1.forEach(markerObj => {
            markerObj.marker.getElement().style.visibility = "hidden";
        });
        markers2.forEach(markerObj => {
            markerObj.marker.getElement().style.visibility = "visible";
        });
        markers3.forEach(markerObj => {
            markerObj.marker.getElement().style.visibility = "hidden";
        });
    } else if (layerId === 3) {
        markers1.forEach(markerObj => {
            markerObj.marker.getElement().style.visibility = "hidden";
        });
        markers2.forEach(markerObj => {
            markerObj.marker.getElement().style.visibility = "hidden";
        });
        markers3.forEach(markerObj => {
            markerObj.marker.getElement().style.visibility = "visible";
        });
    }
}


function toggleLayer(layerId) {
    // Oculta todas las capas
    const layers = ['maine', 'outline', 'poi-labels', 'bd'];
    const pisos = [1, 2, 3];
    pisos.forEach(piso => {
        layers.forEach(layer => {
            map.setLayoutProperty(layer + piso, 'visibility', 'none');
        });
    });

    // Muestra la capa seleccionada
    layers.forEach(layer => {
        map.setLayoutProperty(layer + layerId, 'visibility', 'visible');
    });

    // Mostrar la ruta correspondiente al layerId
    var routeId = 'route' + layerId;
    if (map.getLayer(routeId)) {
        map.setLayoutProperty(routeId, 'visibility', 'visible');
    }

    // Ocultar todas las demás rutas
    ['route1', 'route2', 'route3'].forEach(function(route) {
        if (route !== routeId && map.getLayer(route)) {
            map.setLayoutProperty(route, 'visibility', 'none');
        }
    });

    // Mostrar los marcadores correspondientes al layerId y ocultar los demás
    showMarkersByLayer(layerId);


}
    
    function colorear_mostrar(codigo){
        if (codigo == 1||codigo==2) {
            mostrar(codigo);
            //mostrar_info();
            mostrarIngresos(codigo);
        
    //¨Para pintar un poligono    
    // Cambia el color del polígono cuando se hace clic en él.
    map.setPaintProperty('maine1', 'fill-color', [
        'case',
        ['==', ['get', 'codigo'], codigo],
        '#68141C',
        '#fff' // color predeterminado de la capa
      ]);
      map.setPaintProperty('poi-labels1', 'text-color', ['case', ['==', ['get', 'codigo'], codigo], '#fff', '#000']);
      
      // Cambia el color del polígono cuando se hace clic en él.
    map.setPaintProperty('maine2', 'fill-color', [
        'case',
        ['==', ['get', 'codigo'], codigo],
        '#68141C',
        '#fff' // color predeterminado de la capa
      ]); 
      map.setPaintProperty('poi-labels2', 'text-color', ['case', ['==', ['get', 'codigo'], codigo], '#fff', '#000']);
      // Cambia el color del polígono cuando se hace clic en él.
    map.setPaintProperty('maine3', 'fill-color', [
        'case',
        ['==', ['get', 'codigo'], codigo],
        '#68141C',
        '#fff' // color predeterminado de la capa
      ]);
      map.setPaintProperty('poi-labels3', 'text-color', ['case', ['==', ['get', 'codigo'], codigo], '#fff', '#000']);
    }  
    }
    

    //Eventos

    function handleLayerClick(e) {
        
    //para centrarlo en el mapa
     var center = turf.center(e.features[0].geometry);

    // Centra el mapa en las coordenadas del centro del polígono
    map.flyTo({
        center: center.geometry.coordinates,
        zoom: 22 // Puedes ajustar el nivel de zoom deseado
    });

    //para hacer que se muestre la info del mapa
        var codigo = e.features[0].properties.codigo;
        
        fetchData(codigo);
        colorear_mostrar(codigo);
        
        

    }
    
    

    

    // Asigna la función de manejador de clics a las capas 'maine1'
map.on('click', 'maine1', handleLayerClick);

// Asigna la misma función de manejador de clics a las capas 'maine2'
map.on('click', 'maine2', handleLayerClick);

// Asigna la misma función de manejador de clics a las capas 'maine3'
map.on('click', 'maine3', handleLayerClick);



  map.on('load', function() {
    map.addControl(new mapboxgl.GeolocateControl({
      positionOptions: {
        enableHighAccuracy: true
      },
      trackUserLocation: true
    }));
  });



  function mostrarIngresos(puerta)
  { 
    var parametros = 
    {
      "codigo" : puerta,
    };

    $.ajax({
      data: parametros,
      url: 'proxy.php',
      type: 'POST',
      
      beforesend: function()
      {
        $('#mostrar_mensaje').html("Mensaje antes de Enviar");
      },

      success: function(mensaje)
      {
        $('#mostrar_datos').html(mensaje);
      }
    });
  }
